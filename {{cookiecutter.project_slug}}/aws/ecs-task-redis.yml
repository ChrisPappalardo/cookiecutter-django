family: '{{ cookiecutter.project_slug }}-redis'
executionRoleArn: 'arn:aws:iam::{{ cookiecutter.aws_account_id }}:role/ecsTaskExecutionRole'
networkMode: 'awsvpc'
requiresCompatibilities:
- FARGATE
cpu: '2048'
memory: '4096'

volumes:
- name: '{{ cookiecutter.project_slug }}-efs-redis'
  efsVolumeConfiguration:
    fileSystemId: 'SET-ME'
    rootDirectory: '/redis'

containerDefinitions:

- name: 'redis'
  image: '{{ cookiecutter.aws_account_id }}.dkr.ecr.{{ cookiecutter.aws_region }}.amazonaws.com/{{ cookiecutter.project_slug }}/redis'
  portMappings:
  - containerPort: 6379
    hostPort: 6379
    protocol: tcp
  mountPoints:
  - sourceVolume: '{{ cookiecutter.project_slug }}-efs-redis'
    containerPath: '/data'
  logConfiguration:
    logDriver: awslogs
    options:
      awslogs-group: '{{ cookiecutter.project_slug }}'
      awslogs-region: '{{ cookiecutter.aws_region }}'
      awslogs-stream-prefix: 'ecs'
